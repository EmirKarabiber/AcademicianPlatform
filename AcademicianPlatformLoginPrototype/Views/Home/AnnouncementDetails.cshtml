@using AcademicianPlatformLoginPrototype.Areas.Identity.Data;
@using Microsoft.AspNetCore.Identity
@model Announcement
@inject UserManager<ApplicationUser> UserManager
@inject IUserStore<ApplicationUser> UserStore
@inject SignInManager<ApplicationUser> SignInManager
@* bunlardan hangisi gerekli emin değilim o nedenle hepsini aldım *@

@{
    ViewBag.Title = "Mail Gönder";
}

@{
    var senderID = Model.AnnouncementSenderID;
    var user = await UserStore.FindByIdAsync(senderID, CancellationToken.None);
}

<h2 class="display-4 text-center">Announcement Details</h2>
<p><strong>Title:</strong> @Model.AnnouncementTitle</p>
<p><strong>Content:</strong> @Model.AnnouncementContent</p>
<p><strong>Sent Date:</strong> @Model.AnnouncementSentDate</p>
<a class="btn btn-warning" asp-action="Index">Back to Main Menu</a>

<hr>
<p class="display-5 text-center">Veya</p>
<hr>
<div class="card text-center">
    <div class="card-header">
        <h4> @user.FirstName @user.LastName</h4>
        <p class="card-text">@Model.AnnouncementSentDate</p>
    </div>
    <div class="card-body">
        <h4 class="card-title">@Model.AnnouncementTitle</h4>
        <p class="card-text">@Model.AnnouncementContent</p>
        <a class="btn btn-warning" asp-action="Index">Back to Main Menu</a>
    </div>
    <div class="card-footer text-muted">
        <p class="card-text"><strong>Telefon numarası: </strong>@user.PhoneNumber</p>
        <p class="card-text"><strong>Mail adresi: </strong>@user.Email</p>

        <p class="card-text"><a href="@user.CVPath" class="text-decoration-none">Buraya</a> tıklayarak CV dosyasına
            ulaşabilirsiniz.</p>
        <a class="btn btn-primary" onclick="sendEmail()">Mail Gönder</a>
        <a class="btn btn-danger" asp-controller="Home" asp-action="DeleteAnnouncement"
            asp-route-announcementID="@Model.ID">Delete</a>
    </div>
</div>
<script>
    function sendEmail() {
        var recipientEmail = "@user.Email"; // Kullanıcının mail adresini alın
        var subject = "@Model.AnnouncementTitle Hk."; // Konu değerini istediğiniz şekilde belirleyin
        var body = "İçerik"; // İçerik değerini istediğiniz şekilde belirleyin
        
        var mailtoLink = "mailto:" + recipientEmail + "?subject=" + encodeURIComponent(subject) + "&body=" + encodeURIComponent(body);
        
        window.location.href = mailtoLink;
    }
</script>

@* <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora harum, eos alias dolor aperiam molestias ipsa.
Eos,
reprehenderit? Quos a ipsum minima earum eos reprehenderit doloribus tempore modi optio possimus id nam pariatur
dolores ratione quibusdam vitae labore voluptates, in quod incidunt reiciendis odit quis similique. Molestias illo
explicabo, maxime eaque atque necessitatibus reprehenderit mollitia dolores dolor assumenda excepturi obcaecati vero
repellendus rerum beatae enim. Architecto dolorum nobis iure cum illum asperiores iste placeat eligendi recusandae,
veniam harum beatae cumque in dolores delectus quidem molestias reprehenderit. Nulla perferendis, rerum velit
mollitia et quos amet corrupti voluptates. Repellat ipsam assumenda quos?</p> *@
